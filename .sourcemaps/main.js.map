{"version":3,"file":"main.js","sources":["../../src/providers/fcm/fcm.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/pages/index.ts"],"sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Injectable } from '@angular/core';\nimport { FirebaseX } from \"@ionic-native/firebase-x/ngx\";\n//import { Platform } from 'ionic-angular';\nimport { AngularFirestore } from 'angularfire2/firestore';\nvar FcmProvider = /** @class */ (function () {\n    function FcmProvider(firebaseNative, afs) {\n        this.firebaseNative = firebaseNative;\n        this.afs = afs;\n    }\n    //  private platform: Platform\n    FcmProvider.prototype.getToken = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var token;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.firebaseNative.getToken()];\n                    case 1:\n                        token = _a.sent();\n                        return [4 /*yield*/, this.firebaseNative.grantPermission()];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/, this.saveTokenToFirestore(token)];\n                }\n            });\n        });\n    };\n    FcmProvider.prototype.saveTokenToFirestore = function (token) {\n        if (!token)\n            return;\n        var devicesRef = this.afs.collection('devices');\n        var docData = {\n            token: token,\n            userId: 'testUser',\n        };\n        return devicesRef.doc(token).set(docData);\n    };\n    FcmProvider.prototype.subscribeToTopic = function (topic) {\n        return this.firebaseNative.subscribe(topic);\n    };\n    FcmProvider.prototype.listenToNotifications = function () {\n        return this.firebaseNative.onMessageReceived();\n    };\n    FcmProvider = __decorate([\n        Injectable(),\n        __metadata(\"design:paramtypes\", [FirebaseX,\n            AngularFirestore])\n    ], FcmProvider);\n    return FcmProvider;\n}());\nexport { FcmProvider };\n//# sourceMappingURL=fcm.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/providers/fcm/fcm.ts\n// module id = 357\n// module chunks = 2","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { AppModule } from './app.module';\nplatformBrowserDynamic().bootstrapModule(AppModule);\n//# sourceMappingURL=main.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/main.ts\n// module id = 360\n// module chunks = 2","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { Camera } from '@ionic-native/camera';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { AngularFireModule } from 'angularfire2';\nimport { AngularFireStorageModule } from 'angularfire2/storage';\nimport { AngularFirestoreModule } from 'angularfire2/firestore';\nimport { AngularFireAuthModule } from 'angularfire2/auth';\nimport { AngularFireDatabaseModule } from 'angularfire2/database';\nimport { MyApp } from './app.component';\nimport { FirebaseX } from \"@ionic-native/firebase-x/ngx\";\nimport { FcmProvider } from \"../providers/fcm/fcm\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport * as firebase from \"firebase\";\nvar config = {\n    apiKey: \"AIzaSyCUJ1n1KTJHDaDdVmpY686z8AAle8GAbQQ\",\n    authDomain: \"dship-6fc02.firebaseapp.com\",\n    databaseURL: \"https://dship-6fc02.firebaseio.com\",\n    projectId: \"dship-6fc02\",\n    storageBucket: \"dship-6fc02.appspot.com\",\n    messagingSenderId: \"107565011509\"\n};\nfirebase.initializeApp(config);\nvar AppModule = /** @class */ (function () {\n    function AppModule() {\n    }\n    AppModule = __decorate([\n        NgModule({\n            declarations: [\n                MyApp\n            ],\n            imports: [\n                BrowserModule,\n                AngularFireModule.initializeApp(config),\n                AngularFirestoreModule.enablePersistence(),\n                AngularFireAuthModule,\n                AngularFireStorageModule,\n                AngularFireDatabaseModule,\n                BrowserAnimationsModule,\n                TranslateModule.forRoot({}),\n                IonicModule.forRoot(MyApp, {}, {\n                    links: [\n                        { loadChildren: '../pages/home/home.module#HomePageModule', name: 'HomePage', segment: 'home', priority: 'low', defaultHistory: [] },\n                        { loadChildren: '../pages/login/login.module#LoginPageModule', name: 'login', segment: 'login', priority: 'low', defaultHistory: [] }\n                    ]\n                }),\n            ],\n            bootstrap: [IonicApp],\n            entryComponents: [\n                MyApp,\n            ],\n            providers: [\n                FirebaseX,\n                AngularFireModule,\n                Camera,\n                StatusBar,\n                FcmProvider,\n                // Keep this to enable Ionic's runtime error handling during development\n                { provide: ErrorHandler, useClass: IonicErrorHandler },\n            ]\n        })\n    ], AppModule);\n    return AppModule;\n}());\nexport { AppModule };\n//# sourceMappingURL=app.module.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.module.ts\n// module id = 492\n// module chunks = 2","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Component, ViewChild, } from '@angular/core';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { Nav, Platform, ToastController } from 'ionic-angular';\nimport { FcmProvider } from \"../providers/fcm/fcm\";\nimport { Home, Login } from \"../pages\";\nimport { AngularFireAuth } from 'angularfire2/auth';\nvar MyApp = /** @class */ (function () {\n    function MyApp(platform, statusBar, fcm, toastCtrl, afs) {\n        var _this = this;\n        this.statusBar = statusBar;\n        this.fcm = fcm;\n        this.toastCtrl = toastCtrl;\n        this.afs = afs;\n        this.rootPage = '';\n        this.check();\n        platform.ready().then(function () {\n            statusBar.styleDefault();\n            _this.statusBar.backgroundColorByHexString('#f2af37');\n            // this.menu.swipeEnable(false)\n            //  func.sync()\n            // Get a FCM token\n            // fcm.listenToNotifications()\n            //     .subscribe(res => {\n            //\n            //         if (res.wasTapped) {\n            //             this.nav.setRoot(res.page, {pageId: res.title});\n            //\n            //\n            //         }\n            //         else {\n            //             const toast = toastCtrl.create({\n            //                 message: res.body,\n            //                 duration: 10000,\n            //                 showCloseButton: true,\n            //                 closeButtonText: 'View',\n            //                 dismissOnPageChange: true,\n            //                 position: 'top'\n            //\n            //\n            //             });\n            //\n            //             toast.present();\n            //\n            //             toast.onDidDismiss((data, role) => {\n            //                 // console.log('Dismissed toast');\n            //                 if (role == \"close\") {\n            //                     this.nav.push(res.page, {pageId: res.title});\n            //\n            //\n            //                 }\n            //             });\n            //         }\n            //     });\n        });\n    }\n    MyApp.prototype.check = function () {\n        var _this = this;\n        this.afs.authState.subscribe(function (res) {\n            console.log(\"checkingggg\");\n            if (res && res.uid) {\n                _this.rootPage = Home;\n                _this.uid = res.uid;\n                console.log(\"innn\");\n            }\n            else {\n                _this.rootPage = Login;\n                console.log(\"out\");\n            }\n        });\n    };\n    __decorate([\n        ViewChild(Nav),\n        __metadata(\"design:type\", Nav)\n    ], MyApp.prototype, \"nav\", void 0);\n    MyApp = __decorate([\n        Component({template:/*ion-inline-start:\"/home/dinesh/Desktop/SampleCordova/src/app/app.html\"*/'\\n<ion-nav main #content [root]=\"rootPage\" > </ion-nav>\\n'/*ion-inline-end:\"/home/dinesh/Desktop/SampleCordova/src/app/app.html\"*/\n        }),\n        __metadata(\"design:paramtypes\", [Platform,\n            StatusBar,\n            FcmProvider,\n            ToastController,\n            AngularFireAuth])\n    ], MyApp);\n    return MyApp;\n}());\nexport { MyApp };\n//# sourceMappingURL=app.component.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.ts\n// module id = 638\n// module chunks = 2","// The page the user lands on after opening the app and without a session\nexport var Login = 'login';\nexport var Home = 'HomePage';\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/index.ts\n// module id = 639\n// module chunks = 2"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC9FA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/FA;AAAA;AAAA;AACA;AACA;AACA;;;;A","sourceRoot":""}